<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>kristal</title><meta name="author" content="kkkkr"><meta name="copyright" content="kkkkr"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta property="og:type" content="website">
<meta property="og:title" content="kristal">
<meta property="og:url" content="https://kkkkrs.github.io/index.html">
<meta property="og:site_name" content="kristal">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://kkkkrs.github.io/img/avatar.png">
<meta property="article:author" content="kkkkr">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://kkkkrs.github.io/img/avatar.png"><link rel="shortcut icon" href="/img/avatar.png"><link rel="canonical" href="https://kkkkrs.github.io/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'kristal',
  isHighlightShrink: false,
  isToc: false,
  pageType: 'home'
}</script><link rel="stylesheet" href="/css/mweb-indigo.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div class="page" id="body-wrap"><header class="full_page" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">kristal</span></a></span><div id="menus"></div></nav><div id="site-info"><h1 id="site-title">kristal</h1></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts nc" id="recent-posts"><div class="recent-post-items"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025/02/16/408%E9%9D%A2%E7%BB%8F/" title="408面经">408面经</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-02-15T16:33:41.000Z" title="发表于 2025-02-16 00:33:41">2025-02-16</time></span></div><div class="content">MySQLMySQL分为server层和存储引擎层  server层负责建立连接，分析和执行SQL 存储引擎层负责数据的存储和提取  连接过程连接命令  mysql -h $ip -u $user -p  连接过程需要经过TCP三次握手完成TCP连接建立后连接器开始验证用户名和密码 查看MySQL被多少个客户端连接了  show processlist  MySQL定义了空闲连接的最大空闲时长，如果空闲连接潮沟这个时间，连接器会自动断开也可以用kill connection +id 主动断开 MySQL的最大连接数由max_connections控制 有短连接和长连接的概念，短连接执行一次sql之后断开，长连接可以多次执行SQL语句 解决长连接占用内存问题  定期断开 客户端主动重置  查询缓存如果SQL被解析出是查询语句，就会在缓存中寻找缓存数据，查询缓存是以key-...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025/02/04/go%E9%9D%A2%E7%BB%8F%E6%80%BB%E7%BB%93/" title="go面经总结">go面经总结</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-02-04T09:28:56.000Z" title="发表于 2025-02-04 17:28:56">2025-02-04</time></span></div><div class="content">逃逸分析Go语言逃逸分析最基本的原则：如果一个函数返回对一个变量的引用,那么这个变量就会发生逃逸Go的变量只有在编译器证明函数返回后不会再被引用，才会分配到栈上，其余情况会分配到堆上对于用户态的Go代码而言，所消耗的堆和栈，其实都只是Go运行时通过管理向操作系统申请的堆内存，形成逻辑上的堆和栈 deferdefer函数的参数会在定义时就复制，而闭包中都是引用，记录的地址recover只能在defer后的函数中才能有效，也不能在defer后直接调用recocer，不能多重嵌套 为什么无法从父goroutine恢复子goroutine的panicgoroutine 被设计为一个独立的代码执行单元，拥有自己的执行栈，不与其他 goroutine 共享任何数据。这意味着，无法让 goroutine 拥有返回值、也无法让 goroutine 拥有自身的 ID 编号等。若需要与其他 goroutine 产生交互，要么可以使用 channel 的方式与其他 goroutine...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025/01/26/go%E5%BE%AE%E6%9C%8D%E5%8A%A1/" title="go微服务">go微服务</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-01-25T17:14:44.000Z" title="发表于 2025-01-26 01:14:44">2025-01-26</time></span></div><div class="content">1.26微服务的概念微服务（micro services），是一种分布式系统解决方案有很多个小的程序分别是微服务器，分别作出反馈 单体式架构和微服务架构的区别单体式架构 复杂性会随着开发越来越高，遇到问题难以解决 技术债务逐渐上升 耦合度高，维护成本高（出现bug不容易排查，解决旧bug出现新bug） 持续交付时间较长 技术选型成本高，风险大 扩展性较差 垂直扩展：增加单个系统负荷 水平扩展：增加更多的系统成员    微服务 优点： 职责单一 轻量级通信（RPC协议） 独立性 迭代开发   缺点 运维成本高 分布式复杂 接口成本高 重复性劳动 业务分离困难    RPC协议远程过程调用（remote procedure call protocol）可以跨进程调用函数  为什么使用RPC 每个服务都被封装成进程，彼此独立 进程和进程之间，可以用不同的语言实现  RPC使用步骤服务端 注册RPC服务对象，绑定方法...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025/01/25/GO%E5%AD%A6%E4%B9%A0/" title="GO学习">GO学习</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-01-25T07:48:26.000Z" title="发表于 2025-01-25 15:48:26">2025-01-25</time></span></div><div class="content">1.25为接口做参数校验使用validator做参数校验gin默认使用的是go-playground&#x2F;validator，安装go get -u github.com/go-playground/validator/v10 使用示例 123type User &#123;  age int `validate:&quot;gte=18&quot;` //表示大于等于18岁&#125;  进行验证 123456789101112131415validate := validator.New()//创建验证器  err := validate.Struct(user)  for _, err := range err.(validator.ValidationErrors) &#123;    fmt.Println(err.Namespace()) //命名    fmt.Println(err.Field())    fmt.Println(err.StructNamespace())    fmt.Println(err.StructField())   ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2025/01/21/temp/" title="temp">temp</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2025-01-20T16:07:30.000Z" title="发表于 2025-01-21 00:07:30">2025-01-21</time></span></div></div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">kkkkr</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">5</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/kkkkrs"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/02/16/408%E9%9D%A2%E7%BB%8F/" title="408面经">408面经</a><time datetime="2025-02-15T16:33:41.000Z" title="发表于 2025-02-16 00:33:41">2025-02-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/02/04/go%E9%9D%A2%E7%BB%8F%E6%80%BB%E7%BB%93/" title="go面经总结">go面经总结</a><time datetime="2025-02-04T09:28:56.000Z" title="发表于 2025-02-04 17:28:56">2025-02-04</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/01/26/go%E5%BE%AE%E6%9C%8D%E5%8A%A1/" title="go微服务">go微服务</a><time datetime="2025-01-25T17:14:44.000Z" title="发表于 2025-01-26 01:14:44">2025-01-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/01/25/GO%E5%AD%A6%E4%B9%A0/" title="GO学习">GO学习</a><time datetime="2025-01-25T07:48:26.000Z" title="发表于 2025-01-25 15:48:26">2025-01-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/01/21/temp/" title="temp">temp</a><time datetime="2025-01-20T16:07:30.000Z" title="发表于 2025-01-21 00:07:30">2025-01-21</time></div></div></div></div><div class="card-widget card-archives">
    <div class="item-headline">
      <i class="fas fa-archive"></i>
      <span>归档</span>
      
    </div>
  
    <ul class="card-archive-list">
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/02/">
            <span class="card-archive-list-date">
              二月 2025
            </span>
            <span class="card-archive-list-count">2</span>
          </a>
        </li>
      
        <li class="card-archive-list-item">
          <a class="card-archive-list-link" href="/archives/2025/01/">
            <span class="card-archive-list-date">
              一月 2025
            </span>
            <span class="card-archive-list-count">3</span>
          </a>
        </li>
      
    </ul>
  </div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站信息</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">5</div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">4.3k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总浏览量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2025-02-17T06:55:46.104Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By kkkkr</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>